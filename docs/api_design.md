API 接口設計
===

## 接口種類

### 核心接口

* reserve(item_id: int, time_id: int) -> (sucess: bool, queue_size: int)
預定 `time_id` 時段的 `item_id` 的資源；預定成功則回傳 success = true 而 queue_size 為 don\'t care，預定失敗則回傳 success = false 且 queue_size 為目前排隊人數

* wait(item_id: int, time_id: int) -> (success: bool, waiting_number)
排隊等待 `time_id` 時段的 `item_id` 的資源；若隊列長度小於

```
    這邊的「隊列長度」概念可以用於幫助用戶也可以幫助服務器：
    第一種用法，用戶可以像是買股票一樣，「只有當排隊人數小於一定人數才去排隊」
    同時如果他們真的無論如何都想排，那也可以把隊列長度設成零 default 排
    第二種則是限定每個時段的資源使用最多的排隊數，這樣可以減少服務器的負擔
```

```
    目前我也不確定要不要加上排隊的機制，要加上排隊的話會多很多細節要考慮
    舉例來說一個人有一定的排隊額度（類似以太坊的 Gas），防止有人一下子全部都排隊
    或者說是一個資源佔了很多的排隊資源等等
    同時如果要考慮可能的黃牛的話，還要加上身份驗證的機制
    最後一個則是萬一前面的人撤銷需求後，後面排隊的遞補上了，那要怎麼通知等到的那個人？
    以上這些實現全部都會讓服務器需要處理的負載增加
```

## 管理接口

有些資源可能會暫時不可用，或者永久性的增加/刪除

```
    這樣還要增加管理權限的資料庫...服務器負擔好像又變重了
```